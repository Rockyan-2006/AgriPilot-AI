# AgriPilot-AI 农耘智策AI助手  
## 智能农业决策辅助系统

这是一个基于 **Flask 框架**与 **大模型微调技术** 构建的智能农业辅助应用。它集成了**多模态交互**、**RAG（检索增强生成）**、**Prompt工程**与**农业专业知识库**，旨在为用户提供从种植规划到市场推广的全流程决策支持。

---

## 🚀 核心功能

系统包含四大核心业务模式：

1.  **模式 A：种植决策 (Planting Decision)**
    *   **智能参数提取**：基于自然语言提取环境参数（地区、光照、湿度、pH值）。
    *   **品种推荐**：结合知识库推荐最适宜的作物品种。
    *   **方案规划**：生成详细的种植计划与多作物组合种植策略。

2.  **模式 B：病害诊断 (Disease Diagnosis)**
    *   **多模态诊断**：支持上传作物图片，利用视觉大模型 (Qwen-VL) 进行病害识别。
    *   **RAG 增强**：结合本地 Excel 病害知识库检索症状和防治方法。
    *   **事实优先**：提供以图片事实为核心的诊断报告与防治建议。

3.  **模式 C：市场分析 (Market Analysis)**
    *   **多模态产量预估**：通过上传农田俯拍图，利用 VL 模型评估生长阶段、种植密度并预测产量。
    *   **经济测算**：结合 RAG 检索的市场信息，估算总收入、成本及净利润区间。

4.  **模式 D：产品推广 (Product Promotion)**
    *   **上下文感知**：自动继承前序步骤（如决策或诊断）中的作物信息。
    *   **文案创作**：针对特定目标受众生成高质量社交媒体推广文案。
    *   **AI 绘图**：自动生成营销提示词，并调用通义万相模型生成高质量宣传海报。

---

## 🛠️ 环境准备

### 1. 系统要求
*   Python 3.9
*   阿里云 DashScope API Key

### 2. 配置 API Key
*   本项目使用阿里云 DashScope 服务。**必须**设置环境变量 `DASHSCOPE_API_KEY`。
---

## 📂 项目结构

```text
.
├── setup_and_run.cmd       # 快速运行入口
├── app.py                  # Flask 主应用程序逻辑
├── requirements.txt        # 必要的Python库
├── test/                   # 可以用来测试的部分图片
├── static/
│   └── uploads/            # 用户上传图片的存储目录 (自动创建)
├── templates/
│   ├── login.html          # 登录/欢迎页面
│   └── main.html           # 主功能交互页面
├── database/               # Excel 知识库文件夹
│   ├── 1. 基础品种信息表.xlsx
│   ├── 2. 病害特征表.xlsx
│   └── 3. 营养缺乏症状表.xlsx
└── README.md               # 项目说明文档

```

---

## 🖥️ 运行项目
* 网站尚在测试阶段体验可用账号：zhangyan 体验可用密码：zy@2025
### 方法一：运行app.py
1.  确保 API Key 已配置。
2. 安装依赖
建议创建虚拟环境并安装必要的 Python 库：

```bash
pip install -r requirements.txt
```
3.  启动 Flask 应用：

```bash
python app.py
```
4.  在浏览器中访问：
    *   http://127.0.0.1:5000/

### 方法二：快速运行
1.  双击运行 setup_and_run.cmd，即可快速打开系统窗口
    * 注意：请注意弹出窗口时，点击同意以打开必要权限
---

## ⚠️ 注意事项与模型说明

*   **Session 管理**：为了模拟多轮对话记忆，使用了 Flask Session。
    **刷新 `/main` 页面会清空当前会话记忆**，请注意保存重要信息。
*   **使用的模型**：
    *   **文本/推理**：`qwen-plus` (主力), `qwen-turbo` (提取), `qwen-max` (经济分析), `deepseek-v3` (文案创作)。
    *   **多模态视觉**：`qwen-vl-max` (V4 版本)。
    *   **图像生成**：`wanx-v1`。
*   **费用说明**：调用阿里云 DashScope API 会产生相应的 token 或调用费用，请确保账户余额充足。

---

## 📝 License
本项目仅供学习与研究使用。
* 本项目现阶段侧重于功能的开发，项目已取得 **“天池杯”AI先锋亚军**的成绩，持续完善中。
* 项目下一阶段将进入批量收集农业数据与规模化验证阶段，在实际农业数据中完成验证与完善。
* 如果有针对本项目的建议与进一步合作意向，请发邮件至**1836636300@qq.com**。为了防止邮件被系统错误拦截，我们希望您能够在邮件主题中注明来意。

欢迎来自各位的宝贵建议!

